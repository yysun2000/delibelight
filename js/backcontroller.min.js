/*!
 * 제작자 : 유영선 
 * Copyright 2017-2017 Start Bootstrap
 */
var backcontroller=function(){var lists={topmenu:[],filterlist:[],itemlist:[]},dbprops={itemlist:[]},dataview={},view=[],promise=[],showViews=function(){if(console.log("total : "+view.length),promise.length>0){var query="";console.log(promise.length);for(var i=0;i<promise.length;i++)query+='window["'+promise[i]+'"],';query=query.substr(0,query.length-1),eval("$.when("+query+").done(function(){for(var i=0;i<view.length;i++){try{view[i]();}catch(e){console.log('에러발생');}}})")}else for(var i=0;i<view.length;i++){console.log(view[i]),console.log("current : "+i);try{view[i]()}catch(e){}}};this.p={};var DataToTemplate=function(e){return function(t,n){return $.ajax({type:"GET",url:e,dataType:"JSONP",contentType:"application/json;charset=utf-8",callback:t,success:n})}},setting=[{Name:"Detail",DataURL:"./admin/json/filter.json",templateSelector:"#DetailTopMenu",stateProcessor:function(e){},targetSelector:".DetailTopMenu",afterEvent:function(){}},{Name:"Detail",DataURL:"DB:Slider",templateSelector:"#DetailSlider",stateProcessor:function(e){},targetSelector:".DetailSlider",afterEvent:function(){}},{Name:"Detail",DataURL:"DB:PriceInfo",templateSelector:"#DetailPriceInfo",stateProcessor:function(e){},targetSelector:".DetailPriceInfo",afterEvent:function(){}},{Name:"Detail",DataURL:"./admin/json/filter.json",templateSelector:"#DetailContents",stateProcessor:function(e){},targetSelector:".DetailContents",afterEvent:function(){}},{Name:"Detail",DataURL:"./admin/json/filter.json",templateSelector:"#DetailBottomMenu",stateProcessor:function(e){},targetSelector:".DetailBottomMenu",afterEvent:function(){}},{Name:"Detail",DataURL:"./admin/json/filter.json",templateSelector:"#DetailBottomItems",stateProcessor:function(e){},targetSelector:".DetailBottomItems",afterEvent:function(){}},{Name:"Login",templateSelector:"#LoginTopMenu",stateProcessor:function(e){},targetSelector:".LoginTopMenu",afterEvent:function(){}},{Name:"Login",templateSelector:"#LoginFrame",stateProcessor:function(e){},targetSelector:".LoginFrame",afterEvent:function(){}},{Name:"JoinPage",templateSelector:"#JoinTopMenu",stateProcessor:function(e){},targetSelector:".JoinTopMenu",afterEvent:function(){}},{Name:"JoinPage",templateSelector:"#JoinPage",stateProcessor:function(e){},targetSelector:".JoinPage",afterEvent:function(){}},{Name:"JoinCheck",templateSelector:"#JoinCheckTopMenu",stateProcessor:function(e){},targetSelector:".JoinCheckTopMenu",afterEvent:function(){}},{Name:"JoinCheck",templateSelector:"#JoinCheck",stateProcessor:function(e){},targetSelector:".JoinCheck",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTopMenu",stateProcessor:function(e){},targetSelector:".MyPageTopMenu",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTopState",stateProcessor:function(e){},targetSelector:".MyPageTopState",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabSelector",stateProcessor:function(e){},targetSelector:".MyPageTabSelector",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabOrderFilter",stateProcessor:function(e){},targetSelector:".MyPageTabOrderFilter",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabOrderList",stateProcessor:function(e){},targetSelector:".MyPageTabOrderList",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabWishList",stateProcessor:function(e){},targetSelector:".MyPageTabWishList",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabMemberModify",stateProcessor:function(e){},targetSelector:".MyPageTabMemberModify",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabPoint",stateProcessor:function(e){},targetSelector:".MyPageTabPoint",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabWillPoint",stateProcessor:function(e){},targetSelector:".MyPageTabWillPoint",afterEvent:function(){}},{Name:"MyPage",templateSelector:"#MyPageTabCoupon",stateProcessor:function(e){},targetSelector:".MyPageTabCoupon",afterEvent:function(){}}];return{DB:{method:dataview,getItemList:function(){return dbprops.itemlist},dataTotemplate:DataToTemplate},Component:{init:function(e){setting.push(e)}},state:{TopMenu:{setList:function(e){lists.topmenu=e},getList:function(){return lists.topmenu}},ItemList:{setList:function(e){lists.itemlist=e},getList:function(){return lists.itemlist}},FilterList:{setList:function(e){lists.filterlist=e},getList:function(){return lists.filterlist}}},render:{View:view,showView:showViews,json:function(e){if(e.Data){var t=backcontroller.DB.dataTotemplate;return promise.push(e.Data.name),void(window[e.Data.name]=t(e.Data.url)("get"+e.Data.name,function(t){console.log("DONE : "+e.Data.name);var n=t;view.push(function(){var t=$(e.templateSelector).html();$(e.targetSelector).append(_.template(t)(n))})}))}e.DataURL?e.DataURL.indexOf("DB:")>-1?dataview[e.DataURL.split(":")[1]]=function(t){var n=t;view.push(function(){var t=$(e.templateSelector).html();$(e.targetSelector).append(_.template(t)(n))})}:view.push(function(){$.ajax({type:"GET",url:e.DataURL,dataType:"JSON",success:function(t){var n=$(e.templateSelector).html();if(e.stateProcessor(t),$(e.targetSelector).append(_.template(n)(t)),e.afterEvent)try{e.afterEvent()}catch(a){console.log(a)}},complete:function(e){},error:function(e,t,n){alert("에러발생"+t+n)}})}):view.push(function(){var t=$(e.templateSelector).html();$(e.targetSelector).append(_.template(t)())})},run:function(e){$(e.selector).children().remove();$(e.selector).html();$(e.selector).append(_.template(e.template)(e.data))},start:function(){for(var e=backcontroller.render,t=0;t<setting.length;t++)try{$("#MainPage").length>0?("LeftMenu"==setting[t].Name&&e.json(setting[t]),"Main"==setting[t].Name&&e.json(setting[t])):$("#DetailPage").length>0?("LeftMenu"==setting[t].Name&&e.json(setting[t]),"Detail"==setting[t].Name&&e.json(setting[t])):$("#StorePage").length>0?("LeftMenu"==setting[t].Name&&e.json(setting[t]),"Store"==setting[t].Name&&e.json(setting[t])):$("#LoginPage").length>0?("LeftMenu"==setting[t].Name&&e.json(setting[t]),"Login"==setting[t].Name&&e.json(setting[t])):$("#JoinCheck").length>0?("LeftMenu"==setting[t].Name&&e.json(setting[t]),"JoinCheck"==setting[t].Name&&e.json(setting[t])):$("#JoinPage").length>0?("LeftMenu"==setting[t].Name&&e.json(setting[t]),"JoinPage"==setting[t].Name&&e.json(setting[t])):$("#MyPage").length>0&&("LeftMenu"==setting[t].Name&&e.json(setting[t]),"MyPage"==setting[t].Name&&e.json(setting[t]))}catch(n){}showViews()}}}}();