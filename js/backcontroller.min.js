/*!
 * 제작자 : 유영선 
 * Copyright 2017-2017 Start Bootstrap
 */
var backcontroller=function(){var lists={topmenu:[],filterlist:[],itemlist:[]},dbprops={itemlist:[]},dataview={},view=[],promise=[],showViews=function(){if(console.log("total : "+view.length),promise.length>0){var query="";console.log(promise.length);for(var i=0;i<promise.length;i++)query+='window["'+promise[i]+'"],';query=query.substr(0,query.length-1),console.log("$.when("+query+").done(function(){for(var i=0;i<view.length;i++){try{view[i]();}catch(e){console.log(e);}}})"),eval("$.when("+query+").done(function(){for(var i=0;i<view.length;i++){try{view[i]();}catch(e){console.log(e);}}  })")}else for(var i=0;i<view.length;i++){console.log(view[i]),console.log("current : "+i);try{view[i]()}catch(e){}}},DataToTemplate=function(e){return function(t,o){return $.ajax({type:"GET",url:e,dataType:"JSONP",contentType:"application/json;charset=utf-8",callback:t,success:o})}},setting=[];return{DB:{method:dataview,getItemList:function(){return dbprops.itemlist},dataTotemplate:DataToTemplate},Component:{init:function(e){setting.push(e)},push:function(e){setting.push(e)}},state:{TopMenu:{setList:function(e){lists.topmenu=e},getList:function(){return lists.topmenu}},ItemList:{setList:function(e){lists.itemlist=e},getList:function(){return lists.itemlist}},FilterList:{setList:function(e){lists.filterlist=e},getList:function(){return lists.filterlist}}},render:{View:view,showView:showViews,json:function(e){if(e.Data){var t=backcontroller.DB.dataTotemplate;return promise.push(e.Data.name),void(window[e.Data.name]=t(e.Data.url)("get"+e.Data.name,function(t){console.log("DONE : "+e.Data.name);var o=t;console.log(o),window[e.Data.name]=e.Data.params,console.log(e.Data.params),view.push(function(){try{window.currentListName=e.Data.name,console.log("param.templateSelector : "+e.templateSelector),console.log("param.templateSelector : "+e.targetSelector);var t=$(e.templateSelector).html();console.log($(e.targetSelector).length),0==$(e.targetSelector).length?view.push(function(){window.currentListName=e.Data.name;var t=$(e.templateSelector).html();console.log($(e.targetSelector).length),$(e.targetSelector).append(_.template(t)(o)),console.log(o)}):($(e.targetSelector).append(_.template(t)(o)),console.log(o)),$("script[data-bc=action]").remove()}catch(n){console.log(e.templateSelector+n)}})}))}e.DataURL?e.DataURL.indexOf("DB:")>-1?dataview[e.DataURL.split(":")[1]]=function(t){var o=t;view.push(function(){var t=$(e.templateSelector).html();$(e.targetSelector).append(_.template(t)(o)),$('script[id="'+e.templateSelector.replace("#","")+'"]').remove()})}:view.push(function(){$.ajax({type:"GET",url:e.DataURL,dataType:"JSON",success:function(t){var o=$(e.templateSelector).html();if(e.stateProcessor(t),$(e.targetSelector).append(_.template(o)(t)),e.afterEvent)try{e.afterEvent()}catch(n){console.log(n)}},complete:function(e){},error:function(e,t,o){console.log(e+t+o)}})}):view.push(function(){var t=$(e.templateSelector).html();$(e.targetSelector).append(_.template(t)())})},run:function(e){$(e.selector).children().remove();$(e.selector).html();$(e.selector).append(_.template(e.template)(e.data))},start:function(){backcontroller.render;console.log("setting"),console.log(setting);for(var e=0;e<setting.length;e++)backcontroller.render.json(setting[e]);showViews()}}}}();