/*!
 * 제작자 : 유영선 
 * Copyright 2017-2017 Start Bootstrap
 */
var backcontroller=function(){var lists={topmenu:[],filterlist:[],itemlist:[]},dbprops={itemlist:[]},dataview={},view=[],promise=[],showViews=function(){if(console.log("total : "+view.length),promise.length>0){var query="";console.log(promise.length);for(var i=0;i<promise.length;i++)query+='window["'+promise[i]+'"],';query=query.substr(0,query.length-1),eval("$.when("+query+").done(function(){for(var i=0;i<view.length;i++){try{view[i]();}catch(e){console.log(e);}}})")}else for(var i=0;i<view.length;i++){console.log(view[i]),console.log("current : "+i);try{view[i]()}catch(e){}}},DataToTemplate=function(t){return function(e,n){return $.ajax({type:"GET",url:t,dataType:"JSONP",contentType:"application/json;charset=utf-8",callback:e,success:n})}},setting=[];return{DB:{method:dataview,getItemList:function(){return dbprops.itemlist},dataTotemplate:DataToTemplate},Component:{init:function(t){setting.push(t)},push:function(t){setting.push(t)}},state:{TopMenu:{setList:function(t){lists.topmenu=t},getList:function(){return lists.topmenu}},ItemList:{setList:function(t){lists.itemlist=t},getList:function(){return lists.itemlist}},FilterList:{setList:function(t){lists.filterlist=t},getList:function(){return lists.filterlist}}},render:{View:view,showView:showViews,json:function(t){if(t.Data){var e=backcontroller.DB.dataTotemplate;return promise.push(t.Data.name),void(window[t.Data.name]=e(t.Data.url)("get"+t.Data.name,function(e){console.log("DONE : "+t.Data.name);var n=e;window[t.Data.name]=t.Data.params,view.push(function(){window.currentListName=t.Data.name;var e=$(t.templateSelector).html();$(t.targetSelector).append(_.template(e)(n))})}))}t.DataURL?t.DataURL.indexOf("DB:")>-1?dataview[t.DataURL.split(":")[1]]=function(e){var n=e;view.push(function(){var e=$(t.templateSelector).html();$(t.targetSelector).append(_.template(e)(n))})}:view.push(function(){$.ajax({type:"GET",url:t.DataURL,dataType:"JSON",success:function(e){var n=$(t.templateSelector).html();if(t.stateProcessor(e),$(t.targetSelector).append(_.template(n)(e)),t.afterEvent)try{t.afterEvent()}catch(i){console.log(i)}},complete:function(t){},error:function(t,e,n){console.log(t+e+n)}})}):view.push(function(){var e=$(t.templateSelector).html();$(t.targetSelector).append(_.template(e)())})},run:function(t){$(t.selector).children().remove();$(t.selector).html();$(t.selector).append(_.template(t.template)(t.data))},start:function(){backcontroller.render;console.log("setting"),console.log(setting);for(var t=0;t<setting.length;t++)backcontroller.render.json(setting[t]);showViews()}}}}();